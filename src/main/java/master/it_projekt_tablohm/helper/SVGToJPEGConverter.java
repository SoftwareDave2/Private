package master.it_projekt_tablohm.helper;

import org.apache.batik.transcoder.TranscoderException;
import org.apache.batik.transcoder.TranscoderInput;
import org.apache.batik.transcoder.image.PNGTranscoder;
import org.apache.batik.transcoder.TranscoderOutput;

import javax.imageio.*;
import javax.imageio.metadata.IIOMetadata;
import javax.imageio.metadata.IIOMetadataNode;
import javax.imageio.plugins.jpeg.JPEGImageWriteParam;
import javax.imageio.stream.ImageOutputStream;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.*;
import java.util.Iterator;

public class SVGToJPEGConverter {

    private static final Color[] PALETTE = {
            new Color(0, 0, 0),       // Black
            new Color(255, 255, 255), // White
            new Color(255, 0, 0)      // Red
    };

    public static void convertSVGToJPEG(String svgCode, String jpgPath)
            throws TranscoderException, IOException {

        // Step 1: Convert SVG to BufferedImage
        BufferedImage image = svgToBufferedImage(svgCode);

        // Step 2: Apply 3-color palette
        BufferedImage palettizedImage = applyPalette(image, PALETTE);

        // Step 3: Save as JPEG with baseline and 4:4:4 subsampling
        saveAsJPEG(palettizedImage, jpgPath);

        System.out.println("Conversion complete: " + jpgPath);
    }

    private static BufferedImage svgToBufferedImage(String svgCode)
            throws TranscoderException, IOException {

        // Create a PNG transcoder to get BufferedImage
        BufferedImageTranscoder transcoder = new BufferedImageTranscoder();

        //set background color to white
        transcoder.addTranscodingHint(PNGTranscoder.KEY_BACKGROUND_COLOR, java.awt.Color.WHITE);

        // Create transcoder input from SVG string
        TranscoderInput input = new TranscoderInput(
                new StringReader(svgCode)
        );

        // Transcode
        transcoder.transcode(input, null);

        return transcoder.getBufferedImage();
    }

    private static BufferedImage applyPalette(BufferedImage source, Color[] palette) {
        int width = source.getWidth();
        int height = source.getHeight();

        BufferedImage result = new BufferedImage(
                width, height, BufferedImage.TYPE_INT_RGB
        );

        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                int rgb = source.getRGB(x, y);
                Color originalColor = new Color(rgb);
                Color closestColor = findClosestColor(originalColor, palette);
                result.setRGB(x, y, closestColor.getRGB());
            }
        }

        return result;
    }

    private static Color findClosestColor(Color color, Color[] palette) {
        Color closest = palette[0];
        double minDistance = colorDistance(color, palette[0]);

        for (int i = 1; i < palette.length; i++) {
            double distance = colorDistance(color, palette[i]);
            if (distance < minDistance) {
                minDistance = distance;
                closest = palette[i];
            }
        }

        return closest;
    }

    private static double colorDistance(Color c1, Color c2) {
        int dr = c1.getRed() - c2.getRed();
        int dg = c1.getGreen() - c2.getGreen();
        int db = c1.getBlue() - c2.getBlue();
        return Math.sqrt(dr * dr + dg * dg + db * db);
    }

    private static void saveAsJPEG(BufferedImage image, String outputPath) throws IOException {
        Iterator<ImageWriter> writers = ImageIO.getImageWritersByFormatName("jpeg");
        if (!writers.hasNext()) {
            throw new IllegalStateException("No JPEG writers found");
        }
        ImageWriter writer = writers.next();

        try (ImageOutputStream ios = ImageIO.createImageOutputStream(new File(outputPath))) {
            writer.setOutput(ios);

            JPEGImageWriteParam jpegParams = new JPEGImageWriteParam(null);
            jpegParams.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
            jpegParams.setCompressionQuality(1.0f); // 100% Qualität, dont set it absolutely!
            jpegParams.setProgressiveMode(ImageWriteParam.MODE_DISABLED);

            writer.write(null, new IIOImage(image, null, null), jpegParams);
        } finally {
            writer.dispose();
        }
    }


    // Custom transcoder to get BufferedImage
    static class BufferedImageTranscoder extends PNGTranscoder {
        private BufferedImage bufferedImage;

        @Override
        public BufferedImage createImage(int width, int height) {
            return new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
        }

        @Override
        public void writeImage(BufferedImage img, TranscoderOutput output) {
            this.bufferedImage = img;
        }

        public BufferedImage getBufferedImage() {
            return bufferedImage;
        }
    }


    // EXAMPLE:
    //            String svgCode = """
    // <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300" width="400px" height="300px">
    //  <text style="fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 35px; font-weight: 700; white-space: pre; stroke-width: 1;" x="256.657" y="47.887">KS 503</text>
    //  <text style="fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 24px; white-space: pre; stroke-width: 1;" x="25" y="146.384">Louis Burk</text>
    //  <text style="fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 24px; white-space: pre; stroke-width: 1;" x="25" y="191.384">Vorname Nachname </text>
    //  <path style="fill: rgb(248, 6, 6); stroke: rgb(255, 0, 0); stroke-width: 2;" d="M -2.012 226.737 L 404.969 227.749"/>
    //  <text style="fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 15px; white-space: pre;" x="3.544" y="267.895" transform="matrix(1.006093, 0, 0, 1, 11.727434, -0.027002)">Angestellte der Hochschuljobbörse</text>
    //  <rect x="25.232" y="18.884" width="103.118" height="31.715" style="stroke-width: 1; stroke: rgb(250, 7, 7); fill: rgb(247, 0, 0);" rx="10" ry="10"/>
    //  <text style="fill: rgb(255, 255, 255); font-family: Arial, sans-serif; font-size: 20px; font-weight: 700; text-transform: capitalize; white-space: pre;" transform="matrix(0.658162, 0, 0, 0.694913, 7.826995, 11.939305)"><tspan x="50.415" y="39.871">nicht </tspan><tspan style="text-transform: lowercase;">stören</tspan></text>
    //  <g id="preview"/>
    //  <g id="svg-1" transform="matrix(1, 0, 0, 1, 19.108517, 37.382451)">
    //    <path d="M 314.48 199.744 L 316.48 199.744 L 316.48 201.744 L 314.48 201.744 L 314.48 199.744 Z M 316.48 199.744 L 318.48 199.744 L 318.48 201.744 L 316.48 201.744 L 316.48 199.744 Z M 318.48 199.744 L 320.48 199.744 L 320.48 201.744 L 318.48 201.744 L 318.48 199.744 Z M 320.48 199.744 L 322.48 199.744 L 322.48 201.744 L 320.48 201.744 L 320.48 199.744 Z M 322.48 199.744 L 324.48 199.744 L 324.48 201.744 L 322.48 201.744 L 322.48 199.744 Z M 324.48 199.744 L 326.48 199.744 L 326.48 201.744 L 324.48 201.744 L 324.48 199.744 Z M 326.48 199.744 L 328.48 199.744 L 328.48 201.744 L 326.48 201.744 L 326.48 199.744 Z M 334.48 199.744 L 336.48 199.744 L 336.48 201.744 L 334.48 201.744 L 334.48 199.744 Z M 338.48 199.744 L 340.48 199.744 L 340.48 201.744 L 338.48 201.744 L 338.48 199.744 Z M 340.48 199.744 L 342.48 199.744 L 342.48 201.744 L 340.48 201.744 L 340.48 199.744 Z M 346.48 199.744 L 348.48 199.744 L 348.48 201.744 L 346.48 201.744 L 346.48 199.744 Z M 350.48 199.744 L 352.48 199.744 L 352.48 201.744 L 350.48 201.744 L 350.48 199.744 Z M 352.48 199.744 L 354.48 199.744 L 354.48 201.744 L 352.48 201.744 L 352.48 199.744 Z M 354.48 199.744 L 356.48 199.744 L 356.48 201.744 L 354.48 201.744 L 354.48 199.744 Z M 356.48 199.744 L 358.48 199.744 L 358.48 201.744 L 356.48 201.744 L 356.48 199.744 Z M 358.48 199.744 L 360.48 199.744 L 360.48 201.744 L 358.48 201.744 L 358.48 199.744 Z M 360.48 199.744 L 362.48 199.744 L 362.48 201.744 L 360.48 201.744 L 360.48 199.744 Z M 362.48 199.744 L 364.48 199.744 L 364.48 201.744 L 362.48 201.744 L 362.48 199.744 Z M 314.48 201.744 L 316.48 201.744 L 316.48 203.744 L 314.48 203.744 L 314.48 201.744 Z M 326.48 201.744 L 328.48 201.744 L 328.48 203.744 L 326.48 203.744 L 326.48 201.744 Z M 330.48 201.744 L 332.48 201.744 L 332.48 203.744 L 330.48 203.744 L 330.48 201.744 Z M 332.48 201.744 L 334.48 201.744 L 334.48 203.744 L 332.48 203.744 L 332.48 201.744 Z M 334.48 201.744 L 336.48 201.744 L 336.48 203.744 L 334.48 203.744 L 334.48 201.744 Z M 336.48 201.744 L 338.48 201.744 L 338.48 203.744 L 336.48 203.744 L 336.48 201.744 Z M 338.48 201.744 L 340.48 201.744 L 340.48 203.744 L 338.48 203.744 L 338.48 201.744 Z M 340.48 201.744 L 342.48 201.744 L 342.48 203.744 L 340.48 203.744 L 340.48 201.744 Z M 350.48 201.744 L 352.48 201.744 L 352.48 203.744 L 350.48 203.744 L 350.48 201.744 Z M 362.48 201.744 L 364.48 201.744 L 364.48 203.744 L 362.48 203.744 L 362.48 201.744 Z M 314.48 203.744 L 316.48 203.744 L 316.48 205.744 L 314.48 205.744 L 314.48 203.744 Z M 318.48 203.744 L 320.48 203.744 L 320.48 205.744 L 318.48 205.744 L 318.48 203.744 Z M 320.48 203.744 L 322.48 203.744 L 322.48 205.744 L 320.48 205.744 L 320.48 203.744 Z M 322.48 203.744 L 324.48 203.744 L 324.48 205.744 L 322.48 205.744 L 322.48 203.744 Z M 326.48 203.744 L 328.48 203.744 L 328.48 205.744 L 326.48 205.744 L 326.48 203.744 Z M 330.48 203.744 L 332.48 203.744 L 332.48 205.744 L 330.48 205.744 L 330.48 203.744 Z M 332.48 203.744 L 334.48 203.744 L 334.48 205.744 L 332.48 205.744 L 332.48 203.744 Z M 342.48 203.744 L 344.48 203.744 L 344.48 205.744 L 342.48 205.744 L 342.48 203.744 Z M 346.48 203.744 L 348.48 203.744 L 348.48 205.744 L 346.48 205.744 L 346.48 203.744 Z M 350.48 203.744 L 352.48 203.744 L 352.48 205.744 L 350.48 205.744 L 350.48 203.744 Z M 354.48 203.744 L 356.48 203.744 L 356.48 205.744 L 354.48 205.744 L 354.48 203.744 Z M 356.48 203.744 L 358.48 203.744 L 358.48 205.744 L 356.48 205.744 L 356.48 203.744 Z M 358.48 203.744 L 360.48 203.744 L 360.48 205.744 L 358.48 205.744 L 358.48 203.744 Z M 362.48 203.744 L 364.48 203.744 L 364.48 205.744 L 362.48 205.744 L 362.48 203.744 Z M 314.48 205.744 L 316.48 205.744 L 316.48 207.744 L 314.48 207.744 L 314.48 205.744 Z M 318.48 205.744 L 320.48 205.744 L 320.48 207.744 L 318.48 207.744 L 318.48 205.744 Z M 320.48 205.744 L 322.48 205.744 L 322.48 207.744 L 320.48 207.744 L 320.48 205.744 Z M 322.48 205.744 L 324.48 205.744 L 324.48 207.744 L 322.48 207.744 L 322.48 205.744 Z M 326.48 205.744 L 328.48 205.744 L 328.48 207.744 L 326.48 207.744 L 326.48 205.744 Z M 330.48 205.744 L 332.48 205.744 L 332.48 207.744 L 330.48 207.744 L 330.48 205.744 Z M 332.48 205.744 L 334.48 205.744 L 334.48 207.744 L 332.48 207.744 L 332.48 205.744 Z M 334.48 205.744 L 336.48 205.744 L 336.48 207.744 L 334.48 207.744 L 334.48 205.744 Z M 338.48 205.744 L 340.48 205.744 L 340.48 207.744 L 338.48 207.744 L 338.48 205.744 Z M 340.48 205.744 L 342.48 205.744 L 342.48 207.744 L 340.48 207.744 L 340.48 205.744 Z M 342.48 205.744 L 344.48 205.744 L 344.48 207.744 L 342.48 207.744 L 342.48 205.744 Z M 344.48 205.744 L 346.48 205.744 L 346.48 207.744 L 344.48 207.744 L 344.48 205.744 Z M 346.48 205.744 L 348.48 205.744 L 348.48 207.744 L 346.48 207.744 L 346.48 205.744 Z M 350.48 205.744 L 352.48 205.744 L 352.48 207.744 L 350.48 207.744 L 350.48 205.744 Z M 354.48 205.744 L 356.48 205.744 L 356.48 207.744 L 354.48 207.744 L 354.48 205.744 Z M 356.48 205.744 L 358.48 205.744 L 358.48 207.744 L 356.48 207.744 L 356.48 205.744 Z M 358.48 205.744 L 360.48 205.744 L 360.48 207.744 L 358.48 207.744 L 358.48 205.744 Z M 362.48 205.744 L 364.48 205.744 L 364.48 207.744 L 362.48 207.744 L 362.48 205.744 Z M 314.48 207.744 L 316.48 207.744 L 316.48 209.744 L 314.48 209.744 L 314.48 207.744 Z M 318.48 207.744 L 320.48 207.744 L 320.48 209.744 L 318.48 209.744 L 318.48 207.744 Z M 320.48 207.744 L 322.48 207.744 L 322.48 209.744 L 320.48 209.744 L 320.48 207.744 Z M 322.48 207.744 L 324.48 207.744 L 324.48 209.744 L 322.48 209.744 L 322.48 207.744 Z M 326.48 207.744 L 328.48 207.744 L 328.48 209.744 L 326.48 209.744 L 326.48 207.744 Z M 334.48 207.744 L 336.48 207.744 L 336.48 209.744 L 334.48 209.744 L 334.48 207.744 Z M 336.48 207.744 L 338.48 207.744 L 338.48 209.744 L 336.48 209.744 L 336.48 207.744 Z M 338.48 207.744 L 340.48 207.744 L 340.48 209.744 L 338.48 209.744 L 338.48 207.744 Z M 342.48 207.744 L 344.48 207.744 L 344.48 209.744 L 342.48 209.744 L 342.48 207.744 Z M 350.48 207.744 L 352.48 207.744 L 352.48 209.744 L 350.48 209.744 L 350.48 207.744 Z M 354.48 207.744 L 356.48 207.744 L 356.48 209.744 L 354.48 209.744 L 354.48 207.744 Z M 356.48 207.744 L 358.48 207.744 L 358.48 209.744 L 356.48 209.744 L 356.48 207.744 Z M 358.48 207.744 L 360.48 207.744 L 360.48 209.744 L 358.48 209.744 L 358.48 207.744 Z M 362.48 207.744 L 364.48 207.744 L 364.48 209.744 L 362.48 209.744 L 362.48 207.744 Z M 314.48 209.744 L 316.48 209.744 L 316.48 211.744 L 314.48 211.744 L 314.48 209.744 Z M 326.48 209.744 L 328.48 209.744 L 328.48 211.744 L 326.48 211.744 L 326.48 209.744 Z M 332.48 209.744 L 334.48 209.744 L 334.48 211.744 L 332.48 211.744 L 332.48 209.744 Z M 334.48 209.744 L 336.48 209.744 L 336.48 211.744 L 334.48 211.744 L 334.48 209.744 Z M 340.48 209.744 L 342.48 209.744 L 342.48 211.744 L 340.48 211.744 L 340.48 209.744 Z M 342.48 209.744 L 344.48 209.744 L 344.48 211.744 L 342.48 211.744 L 342.48 209.744 Z M 350.48 209.744 L 352.48 209.744 L 352.48 211.744 L 350.48 211.744 L 350.48 209.744 Z M 362.48 209.744 L 364.48 209.744 L 364.48 211.744 L 362.48 211.744 L 362.48 209.744 Z M 314.48 211.744 L 316.48 211.744 L 316.48 213.744 L 314.48 213.744 L 314.48 211.744 Z M 316.48 211.744 L 318.48 211.744 L 318.48 213.744 L 316.48 213.744 L 316.48 211.744 Z M 318.48 211.744 L 320.48 211.744 L 320.48 213.744 L 318.48 213.744 L 318.48 211.744 Z M 320.48 211.744 L 322.48 211.744 L 322.48 213.744 L 320.48 213.744 L 320.48 211.744 Z M 322.48 211.744 L 324.48 211.744 L 324.48 213.744 L 322.48 213.744 L 322.48 211.744 Z M 324.48 211.744 L 326.48 211.744 L 326.48 213.744 L 324.48 213.744 L 324.48 211.744 Z M 326.48 211.744 L 328.48 211.744 L 328.48 213.744 L 326.48 213.744 L 326.48 211.744 Z M 330.48 211.744 L 332.48 211.744 L 332.48 213.744 L 330.48 213.744 L 330.48 211.744 Z M 334.48 211.744 L 336.48 211.744 L 336.48 213.744 L 334.48 213.744 L 334.48 211.744 Z M 338.48 211.744 L 340.48 211.744 L 340.48 213.744 L 338.48 213.744 L 338.48 211.744 Z M 342.48 211.744 L 344.48 211.744 L 344.48 213.744 L 342.48 213.744 L 342.48 211.744 Z M 346.48 211.744 L 348.48 211.744 L 348.48 213.744 L 346.48 213.744 L 346.48 211.744 Z M 350.48 211.744 L 352.48 211.744 L 352.48 213.744 L 350.48 213.744 L 350.48 211.744 Z M 352.48 211.744 L 354.48 211.744 L 354.48 213.744 L 352.48 213.744 L 352.48 211.744 Z M 354.48 211.744 L 356.48 211.744 L 356.48 213.744 L 354.48 213.744 L 354.48 211.744 Z M 356.48 211.744 L 358.48 211.744 L 358.48 213.744 L 356.48 213.744 L 356.48 211.744 Z M 358.48 211.744 L 360.48 211.744 L 360.48 213.744 L 358.48 213.744 L 358.48 211.744 Z M 360.48 211.744 L 362.48 211.744 L 362.48 213.744 L 360.48 213.744 L 360.48 211.744 Z M 362.48 211.744 L 364.48 211.744 L 364.48 213.744 L 362.48 213.744 L 362.48 211.744 Z M 330.48 213.744 L 332.48 213.744 L 332.48 215.744 L 330.48 215.744 L 330.48 213.744 Z M 334.48 213.744 L 336.48 213.744 L 336.48 215.744 L 334.48 215.744 L 334.48 213.744 Z M 344.48 213.744 L 346.48 213.744 L 346.48 215.744 L 344.48 215.744 L 344.48 213.744 Z M 314.48 215.744 L 316.48 215.744 L 316.48 217.744 L 314.48 217.744 L 314.48 215.744 Z M 326.48 215.744 L 328.48 215.744 L 328.48 217.744 L 326.48 217.744 L 326.48 215.744 Z M 330.48 215.744 L 332.48 215.744 L 332.48 217.744 L 330.48 217.744 L 330.48 215.744 Z M 338.48 215.744 L 340.48 215.744 L 340.48 217.744 L 338.48 217.744 L 338.48 215.744 Z M 340.48 215.744 L 342.48 215.744 L 342.48 217.744 L 340.48 217.744 L 340.48 215.744 Z M 344.48 215.744 L 346.48 215.744 L 346.48 217.744 L 344.48 217.744 L 344.48 215.744 Z M 346.48 215.744 L 348.48 215.744 L 348.48 217.744 L 346.48 217.744 L 346.48 215.744 Z M 348.48 215.744 L 350.48 215.744 L 350.48 217.744 L 348.48 217.744 L 348.48 215.744 Z M 350.48 215.744 L 352.48 215.744 L 352.48 217.744 L 350.48 217.744 L 350.48 215.744 Z M 356.48 215.744 L 358.48 215.744 L 358.48 217.744 L 356.48 217.744 L 356.48 215.744 Z M 358.48 215.744 L 360.48 215.744 L 360.48 217.744 L 358.48 217.744 L 358.48 215.744 Z M 360.48 215.744 L 362.48 215.744 L 362.48 217.744 L 360.48 217.744 L 360.48 215.744 Z M 314.48 217.744 L 316.48 217.744 L 316.48 219.744 L 314.48 219.744 L 314.48 217.744 Z M 316.48 217.744 L 318.48 217.744 L 318.48 219.744 L 316.48 219.744 L 316.48 217.744 Z M 318.48 217.744 L 320.48 217.744 L 320.48 219.744 L 318.48 219.744 L 318.48 217.744 Z M 324.48 217.744 L 326.48 217.744 L 326.48 219.744 L 324.48 219.744 L 324.48 217.744 Z M 328.48 217.744 L 330.48 217.744 L 330.48 219.744 L 328.48 219.744 L 328.48 217.744 Z M 336.48 217.744 L 338.48 217.744 L 338.48 219.744 L 336.48 219.744 L 336.48 217.744 Z M 340.48 217.744 L 342.48 217.744 L 342.48 219.744 L 340.48 219.744 L 340.48 217.744 Z M 344.48 217.744 L 346.48 217.744 L 346.48 219.744 L 344.48 219.744 L 344.48 217.744 Z M 346.48 217.744 L 348.48 217.744 L 348.48 219.744 L 346.48 219.744 L 346.48 217.744 Z M 348.48 217.744 L 350.48 217.744 L 350.48 219.744 L 348.48 219.744 L 348.48 217.744 Z M 354.48 217.744 L 356.48 217.744 L 356.48 219.744 L 354.48 219.744 L 354.48 217.744 Z M 356.48 217.744 L 358.48 217.744 L 358.48 219.744 L 356.48 219.744 L 356.48 217.744 Z M 358.48 217.744 L 360.48 217.744 L 360.48 219.744 L 358.48 219.744 L 358.48 217.744 Z M 360.48 217.744 L 362.48 217.744 L 362.48 219.744 L 360.48 219.744 L 360.48 217.744 Z M 314.48 219.744 L 316.48 219.744 L 316.48 221.744 L 314.48 221.744 L 314.48 219.744 Z M 316.48 219.744 L 318.48 219.744 L 318.48 221.744 L 316.48 221.744 L 316.48 219.744 Z M 322.48 219.744 L 324.48 219.744 L 324.48 221.744 L 322.48 221.744 L 322.48 219.744 Z M 326.48 219.744 L 328.48 219.744 L 328.48 221.744 L 326.48 221.744 L 326.48 219.744 Z M 334.48 219.744 L 336.48 219.744 L 336.48 221.744 L 334.48 221.744 L 334.48 219.744 Z M 336.48 219.744 L 338.48 219.744 L 338.48 221.744 L 336.48 221.744 L 336.48 219.744 Z M 340.48 219.744 L 342.48 219.744 L 342.48 221.744 L 340.48 221.744 L 340.48 219.744 Z M 344.48 219.744 L 346.48 219.744 L 346.48 221.744 L 344.48 221.744 L 344.48 219.744 Z M 350.48 219.744 L 352.48 219.744 L 352.48 221.744 L 350.48 221.744 L 350.48 219.744 Z M 352.48 219.744 L 354.48 219.744 L 354.48 221.744 L 352.48 221.744 L 352.48 219.744 Z M 356.48 219.744 L 358.48 219.744 L 358.48 221.744 L 356.48 221.744 L 356.48 219.744 Z M 360.48 219.744 L 362.48 219.744 L 362.48 221.744 L 360.48 221.744 L 360.48 219.744 Z M 362.48 219.744 L 364.48 219.744 L 364.48 221.744 L 362.48 221.744 L 362.48 219.744 Z M 314.48 221.744 L 316.48 221.744 L 316.48 223.744 L 314.48 223.744 L 314.48 221.744 Z M 318.48 221.744 L 320.48 221.744 L 320.48 223.744 L 318.48 223.744 L 318.48 221.744 Z M 322.48 221.744 L 324.48 221.744 L 324.48 223.744 L 322.48 223.744 L 322.48 221.744 Z M 328.48 221.744 L 330.48 221.744 L 330.48 223.744 L 328.48 223.744 L 328.48 221.744 Z M 330.48 221.744 L 332.48 221.744 L 332.48 223.744 L 330.48 223.744 L 330.48 221.744 Z M 332.48 221.744 L 334.48 221.744 L 334.48 223.744 L 332.48 223.744 L 332.48 221.744 Z M 344.48 221.744 L 346.48 221.744 L 346.48 223.744 L 344.48 223.744 L 344.48 221.744 Z M 346.48 221.744 L 348.48 221.744 L 348.48 223.744 L 346.48 223.744 L 346.48 221.744 Z M 354.48 221.744 L 356.48 221.744 L 356.48 223.744 L 354.48 223.744 L 354.48 221.744 Z M 356.48 221.744 L 358.48 221.744 L 358.48 223.744 L 356.48 223.744 L 356.48 221.744 Z M 362.48 221.744 L 364.48 221.744 L 364.48 223.744 L 362.48 223.744 L 362.48 221.744 Z M 314.48 223.744 L 316.48 223.744 L 316.48 225.744 L 314.48 225.744 L 314.48 223.744 Z M 316.48 223.744 L 318.48 223.744 L 318.48 225.744 L 316.48 225.744 L 316.48 223.744 Z M 318.48 223.744 L 320.48 223.744 L 320.48 225.744 L 318.48 225.744 L 318.48 223.744 Z M 320.48 223.744 L 322.48 223.744 L 322.48 225.744 L 320.48 225.744 L 320.48 223.744 Z M 324.48 223.744 L 326.48 223.744 L 326.48 225.744 L 324.48 225.744 L 324.48 223.744 Z M 326.48 223.744 L 328.48 223.744 L 328.48 225.744 L 326.48 225.744 L 326.48 223.744 Z M 338.48 223.744 L 340.48 223.744 L 340.48 225.744 L 338.48 225.744 L 338.48 223.744 Z M 342.48 223.744 L 344.48 223.744 L 344.48 225.744 L 342.48 225.744 L 342.48 223.744 Z M 346.48 223.744 L 348.48 223.744 L 348.48 225.744 L 346.48 225.744 L 346.48 223.744 Z M 348.48 223.744 L 350.48 223.744 L 350.48 225.744 L 348.48 225.744 L 348.48 223.744 Z M 350.48 223.744 L 352.48 223.744 L 352.48 225.744 L 350.48 225.744 L 350.48 223.744 Z M 362.48 223.744 L 364.48 223.744 L 364.48 225.744 L 362.48 225.744 L 362.48 223.744 Z M 314.48 225.744 L 316.48 225.744 L 316.48 227.744 L 314.48 227.744 L 314.48 225.744 Z M 332.48 225.744 L 334.48 225.744 L 334.48 227.744 L 332.48 227.744 L 332.48 225.744 Z M 342.48 225.744 L 344.48 225.744 L 344.48 227.744 L 342.48 227.744 L 342.48 225.744 Z M 344.48 225.744 L 346.48 225.744 L 346.48 227.744 L 344.48 227.744 L 344.48 225.744 Z M 360.48 225.744 L 362.48 225.744 L 362.48 227.744 L 360.48 227.744 L 360.48 225.744 Z M 314.48 227.744 L 316.48 227.744 L 316.48 229.744 L 314.48 229.744 L 314.48 227.744 Z M 322.48 227.744 L 324.48 227.744 L 324.48 229.744 L 322.48 229.744 L 322.48 227.744 Z M 324.48 227.744 L 326.48 227.744 L 326.48 229.744 L 324.48 229.744 L 324.48 227.744 Z M 326.48 227.744 L 328.48 227.744 L 328.48 229.744 L 326.48 229.744 L 326.48 227.744 Z M 328.48 227.744 L 330.48 227.744 L 330.48 229.744 L 328.48 229.744 L 328.48 227.744 Z M 332.48 227.744 L 334.48 227.744 L 334.48 229.744 L 332.48 229.744 L 332.48 227.744 Z M 336.48 227.744 L 338.48 227.744 L 338.48 229.744 L 336.48 229.744 L 336.48 227.744 Z M 338.48 227.744 L 340.48 227.744 L 340.48 229.744 L 338.48 229.744 L 338.48 227.744 Z M 340.48 227.744 L 342.48 227.744 L 342.48 229.744 L 340.48 229.744 L 340.48 227.744 Z M 344.48 227.744 L 346.48 227.744 L 346.48 229.744 L 344.48 229.744 L 344.48 227.744 Z M 348.48 227.744 L 350.48 227.744 L 350.48 229.744 L 348.48 229.744 L 348.48 227.744 Z M 352.48 227.744 L 354.48 227.744 L 354.48 229.744 L 352.48 229.744 L 352.48 227.744 Z M 356.48 227.744 L 358.48 227.744 L 358.48 229.744 L 356.48 229.744 L 356.48 227.744 Z M 360.48 227.744 L 362.48 227.744 L 362.48 229.744 L 360.48 229.744 L 360.48 227.744 Z M 362.48 227.744 L 364.48 227.744 L 364.48 229.744 L 362.48 229.744 L 362.48 227.744 Z M 314.48 229.744 L 316.48 229.744 L 316.48 231.744 L 314.48 231.744 L 314.48 229.744 Z M 318.48 229.744 L 320.48 229.744 L 320.48 231.744 L 318.48 231.744 L 318.48 229.744 Z M 324.48 229.744 L 326.48 229.744 L 326.48 231.744 L 324.48 231.744 L 324.48 229.744 Z M 328.48 229.744 L 330.48 229.744 L 330.48 231.744 L 328.48 231.744 L 328.48 229.744 Z M 332.48 229.744 L 334.48 229.744 L 334.48 231.744 L 332.48 231.744 L 332.48 229.744 Z M 334.48 229.744 L 336.48 229.744 L 336.48 231.744 L 334.48 231.744 L 334.48 229.744 Z M 336.48 229.744 L 338.48 229.744 L 338.48 231.744 L 336.48 231.744 L 336.48 229.744 Z M 346.48 229.744 L 348.48 229.744 L 348.48 231.744 L 346.48 231.744 L 346.48 229.744 Z M 354.48 229.744 L 356.48 229.744 L 356.48 231.744 L 354.48 231.744 L 354.48 229.744 Z M 358.48 229.744 L 360.48 229.744 L 360.48 231.744 L 358.48 231.744 L 358.48 229.744 Z M 362.48 229.744 L 364.48 229.744 L 364.48 231.744 L 362.48 231.744 L 362.48 229.744 Z M 314.48 231.744 L 316.48 231.744 L 316.48 233.744 L 314.48 233.744 L 314.48 231.744 Z M 326.48 231.744 L 328.48 231.744 L 328.48 233.744 L 326.48 233.744 L 326.48 231.744 Z M 328.48 231.744 L 330.48 231.744 L 330.48 233.744 L 328.48 233.744 L 328.48 231.744 Z M 330.48 231.744 L 332.48 231.744 L 332.48 233.744 L 330.48 233.744 L 330.48 231.744 Z M 336.48 231.744 L 338.48 231.744 L 338.48 233.744 L 336.48 233.744 L 336.48 231.744 Z M 338.48 231.744 L 340.48 231.744 L 340.48 233.744 L 338.48 233.744 L 338.48 231.744 Z M 340.48 231.744 L 342.48 231.744 L 342.48 233.744 L 340.48 233.744 L 340.48 231.744 Z M 346.48 231.744 L 348.48 231.744 L 348.48 233.744 L 346.48 233.744 L 346.48 231.744 Z M 348.48 231.744 L 350.48 231.744 L 350.48 233.744 L 348.48 233.744 L 348.48 231.744 Z M 350.48 231.744 L 352.48 231.744 L 352.48 233.744 L 350.48 233.744 L 350.48 231.744 Z M 352.48 231.744 L 354.48 231.744 L 354.48 233.744 L 352.48 233.744 L 352.48 231.744 Z M 354.48 231.744 L 356.48 231.744 L 356.48 233.744 L 354.48 233.744 L 354.48 231.744 Z M 358.48 231.744 L 360.48 231.744 L 360.48 233.744 L 358.48 233.744 L 358.48 231.744 Z M 330.48 233.744 L 332.48 233.744 L 332.48 235.744 L 330.48 235.744 L 330.48 233.744 Z M 334.48 233.744 L 336.48 233.744 L 336.48 235.744 L 334.48 235.744 L 334.48 233.744 Z M 338.48 233.744 L 340.48 233.744 L 340.48 235.744 L 338.48 235.744 L 338.48 233.744 Z M 342.48 233.744 L 344.48 233.744 L 344.48 235.744 L 342.48 235.744 L 342.48 233.744 Z M 344.48 233.744 L 346.48 233.744 L 346.48 235.744 L 344.48 235.744 L 344.48 233.744 Z M 346.48 233.744 L 348.48 233.744 L 348.48 235.744 L 346.48 235.744 L 346.48 233.744 Z M 354.48 233.744 L 356.48 233.744 L 356.48 235.744 L 354.48 235.744 L 354.48 233.744 Z M 358.48 233.744 L 360.48 233.744 L 360.48 235.744 L 358.48 235.744 L 358.48 233.744 Z M 314.48 235.744 L 316.48 235.744 L 316.48 237.744 L 314.48 237.744 L 314.48 235.744 Z M 316.48 235.744 L 318.48 235.744 L 318.48 237.744 L 316.48 237.744 L 316.48 235.744 Z M 318.48 235.744 L 320.48 235.744 L 320.48 237.744 L 318.48 237.744 L 318.48 235.744 Z M 320.48 235.744 L 322.48 235.744 L 322.48 237.744 L 320.48 237.744 L 320.48 235.744 Z M 322.48 235.744 L 324.48 235.744 L 324.48 237.744 L 322.48 237.744 L 322.48 235.744 Z M 324.48 235.744 L 326.48 235.744 L 326.48 237.744 L 324.48 237.744 L 324.48 235.744 Z M 326.48 235.744 L 328.48 235.744 L 328.48 237.744 L 326.48 237.744 L 326.48 235.744 Z M 332.48 235.744 L 334.48 235.744 L 334.48 237.744 L 332.48 237.744 L 332.48 235.744 Z M 334.48 235.744 L 336.48 235.744 L 336.48 237.744 L 334.48 237.744 L 334.48 235.744 Z M 336.48 235.744 L 338.48 235.744 L 338.48 237.744 L 336.48 237.744 L 336.48 235.744 Z M 340.48 235.744 L 342.48 235.744 L 342.48 237.744 L 340.48 237.744 L 340.48 235.744 Z M 342.48 235.744 L 344.48 235.744 L 344.48 237.744 L 342.48 237.744 L 342.48 235.744 Z M 346.48 235.744 L 348.48 235.744 L 348.48 237.744 L 346.48 237.744 L 346.48 235.744 Z M 350.48 235.744 L 352.48 235.744 L 352.48 237.744 L 350.48 237.744 L 350.48 235.744 Z M 354.48 235.744 L 356.48 235.744 L 356.48 237.744 L 354.48 237.744 L 354.48 235.744 Z M 356.48 235.744 L 358.48 235.744 L 358.48 237.744 L 356.48 237.744 L 356.48 235.744 Z M 362.48 235.744 L 364.48 235.744 L 364.48 237.744 L 362.48 237.744 L 362.48 235.744 Z M 314.48 237.744 L 316.48 237.744 L 316.48 239.744 L 314.48 239.744 L 314.48 237.744 Z M 326.48 237.744 L 328.48 237.744 L 328.48 239.744 L 326.48 239.744 L 326.48 237.744 Z M 334.48 237.744 L 336.48 237.744 L 336.48 239.744 L 334.48 239.744 L 334.48 237.744 Z M 336.48 237.744 L 338.48 237.744 L 338.48 239.744 L 336.48 239.744 L 336.48 237.744 Z M 346.48 237.744 L 348.48 237.744 L 348.48 239.744 L 346.48 239.744 L 346.48 237.744 Z M 354.48 237.744 L 356.48 237.744 L 356.48 239.744 L 354.48 239.744 L 354.48 237.744 Z M 360.48 237.744 L 362.48 237.744 L 362.48 239.744 L 360.48 239.744 L 360.48 237.744 Z M 362.48 237.744 L 364.48 237.744 L 364.48 239.744 L 362.48 239.744 L 362.48 237.744 Z M 314.48 239.744 L 316.48 239.744 L 316.48 241.744 L 314.48 241.744 L 314.48 239.744 Z M 318.48 239.744 L 320.48 239.744 L 320.48 241.744 L 318.48 241.744 L 318.48 239.744 Z M 320.48 239.744 L 322.48 239.744 L 322.48 241.744 L 320.48 241.744 L 320.48 239.744 Z M 322.48 239.744 L 324.48 239.744 L 324.48 241.744 L 322.48 241.744 L 322.48 239.744 Z M 326.48 239.744 L 328.48 239.744 L 328.48 241.744 L 326.48 241.744 L 326.48 239.744 Z M 336.48 239.744 L 338.48 239.744 L 338.48 241.744 L 336.48 241.744 L 336.48 239.744 Z M 338.48 239.744 L 340.48 239.744 L 340.48 241.744 L 338.48 241.744 L 338.48 239.744 Z M 340.48 239.744 L 342.48 239.744 L 342.48 241.744 L 340.48 241.744 L 340.48 239.744 Z M 344.48 239.744 L 346.48 239.744 L 346.48 241.744 L 344.48 241.744 L 344.48 239.744 Z M 346.48 239.744 L 348.48 239.744 L 348.48 241.744 L 346.48 241.744 L 346.48 239.744 Z M 348.48 239.744 L 350.48 239.744 L 350.48 241.744 L 348.48 241.744 L 348.48 239.744 Z M 350.48 239.744 L 352.48 239.744 L 352.48 241.744 L 350.48 241.744 L 350.48 239.744 Z M 352.48 239.744 L 354.48 239.744 L 354.48 241.744 L 352.48 241.744 L 352.48 239.744 Z M 354.48 239.744 L 356.48 239.744 L 356.48 241.744 L 354.48 241.744 L 354.48 239.744 Z M 356.48 239.744 L 358.48 239.744 L 358.48 241.744 L 356.48 241.744 L 356.48 239.744 Z M 358.48 239.744 L 360.48 239.744 L 360.48 241.744 L 358.48 241.744 L 358.48 239.744 Z M 314.48 241.744 L 316.48 241.744 L 316.48 243.744 L 314.48 243.744 L 314.48 241.744 Z M 318.48 241.744 L 320.48 241.744 L 320.48 243.744 L 318.48 243.744 L 318.48 241.744 Z M 320.48 241.744 L 322.48 241.744 L 322.48 243.744 L 320.48 243.744 L 320.48 241.744 Z M 322.48 241.744 L 324.48 241.744 L 324.48 243.744 L 322.48 243.744 L 322.48 241.744 Z M 326.48 241.744 L 328.48 241.744 L 328.48 243.744 L 326.48 243.744 L 326.48 241.744 Z M 336.48 241.744 L 338.48 241.744 L 338.48 243.744 L 336.48 243.744 L 336.48 241.744 Z M 338.48 241.744 L 340.48 241.744 L 340.48 243.744 L 338.48 243.744 L 338.48 241.744 Z M 350.48 241.744 L 352.48 241.744 L 352.48 243.744 L 350.48 243.744 L 350.48 241.744 Z M 352.48 241.744 L 354.48 241.744 L 354.48 243.744 L 352.48 243.744 L 352.48 241.744 Z M 356.48 241.744 L 358.48 241.744 L 358.48 243.744 L 356.48 243.744 L 356.48 241.744 Z M 360.48 241.744 L 362.48 241.744 L 362.48 243.744 L 360.48 243.744 L 360.48 241.744 Z M 362.48 241.744 L 364.48 241.744 L 364.48 243.744 L 362.48 243.744 L 362.48 241.744 Z M 314.48 243.744 L 316.48 243.744 L 316.48 245.744 L 314.48 245.744 L 314.48 243.744 Z M 318.48 243.744 L 320.48 243.744 L 320.48 245.744 L 318.48 245.744 L 318.48 243.744 Z M 320.48 243.744 L 322.48 243.744 L 322.48 245.744 L 320.48 245.744 L 320.48 243.744 Z M 322.48 243.744 L 324.48 243.744 L 324.48 245.744 L 322.48 245.744 L 322.48 243.744 Z M 326.48 243.744 L 328.48 243.744 L 328.48 245.744 L 326.48 245.744 L 326.48 243.744 Z M 338.48 243.744 L 340.48 243.744 L 340.48 245.744 L 338.48 245.744 L 338.48 243.744 Z M 348.48 243.744 L 350.48 243.744 L 350.48 245.744 L 348.48 245.744 L 348.48 243.744 Z M 358.48 243.744 L 360.48 243.744 L 360.48 245.744 L 358.48 245.744 L 358.48 243.744 Z M 362.48 243.744 L 364.48 243.744 L 364.48 245.744 L 362.48 245.744 L 362.48 243.744 Z M 314.48 245.744 L 316.48 245.744 L 316.48 247.744 L 314.48 247.744 L 314.48 245.744 Z M 326.48 245.744 L 328.48 245.744 L 328.48 247.744 L 326.48 247.744 L 326.48 245.744 Z M 338.48 245.744 L 340.48 245.744 L 340.48 247.744 L 338.48 247.744 L 338.48 245.744 Z M 344.48 245.744 L 346.48 245.744 L 346.48 247.744 L 344.48 247.744 L 344.48 245.744 Z M 346.48 245.744 L 348.48 245.744 L 348.48 247.744 L 346.48 247.744 L 346.48 245.744 Z M 350.48 245.744 L 352.48 245.744 L 352.48 247.744 L 350.48 247.744 L 350.48 245.744 Z M 352.48 245.744 L 354.48 245.744 L 354.48 247.744 L 352.48 247.744 L 352.48 245.744 Z M 354.48 245.744 L 356.48 245.744 L 356.48 247.744 L 354.48 247.744 L 354.48 245.744 Z M 362.48 245.744 L 364.48 245.744 L 364.48 247.744 L 362.48 247.744 L 362.48 245.744 Z M 314.48 247.744 L 316.48 247.744 L 316.48 249.744 L 314.48 249.744 L 314.48 247.744 Z M 316.48 247.744 L 318.48 247.744 L 318.48 249.744 L 316.48 249.744 L 316.48 247.744 Z M 318.48 247.744 L 320.48 247.744 L 320.48 249.744 L 318.48 249.744 L 318.48 247.744 Z M 320.48 247.744 L 322.48 247.744 L 322.48 249.744 L 320.48 249.744 L 320.48 247.744 Z M 322.48 247.744 L 324.48 247.744 L 324.48 249.744 L 322.48 249.744 L 322.48 247.744 Z M 324.48 247.744 L 326.48 247.744 L 326.48 249.744 L 324.48 249.744 L 324.48 247.744 Z M 326.48 247.744 L 328.48 247.744 L 328.48 249.744 L 326.48 249.744 L 326.48 247.744 Z M 330.48 247.744 L 332.48 247.744 L 332.48 249.744 L 330.48 249.744 L 330.48 247.744 Z M 334.48 247.744 L 336.48 247.744 L 336.48 249.744 L 334.48 249.744 L 334.48 247.744 Z M 336.48 247.744 L 338.48 247.744 L 338.48 249.744 L 336.48 249.744 L 336.48 247.744 Z M 342.48 247.744 L 344.48 247.744 L 344.48 249.744 L 342.48 249.744 L 342.48 247.744 Z M 344.48 247.744 L 346.48 247.744 L 346.48 249.744 L 344.48 249.744 L 344.48 247.744 Z M 346.48 247.744 L 348.48 247.744 L 348.48 249.744 L 346.48 249.744 L 346.48 247.744 Z M 350.48 247.744 L 352.48 247.744 L 352.48 249.744 L 350.48 249.744 L 350.48 247.744 Z M 356.48 247.744 L 358.48 247.744 L 358.48 249.744 L 356.48 249.744 L 356.48 247.744 Z M 362.48 247.744 L 364.48 247.744 L 364.48 249.744 L 362.48 249.744 L 362.48 247.744 Z" stroke="transparent" fill="black" style="stroke-width: 1;"/>
    //  </g>
    //  <text style="fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 24px; white-space: pre; stroke-width: 1;" x="25" y="101">Uwe Wienkop</text>
    //  <text style="white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 28px;" x="204.111" y="127.067"> </text>
    //  <text style="white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 28px;" x="457.973" y="151.169"> </text>
    //</svg> """;
    //
    //            // 2. Speicherort für JPEG
    //            String testfile = "test_output.jpg";
    //            String outputPath = UPLOADS_DIR + File.separator + testfile;
    //
    //            // 3. SVG -> JPEG konvertieren
    //            SVGToJPEGConverter.convertSVGToJPEG(svgCode, outputPath);
}
